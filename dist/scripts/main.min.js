"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){angular.module("myflight.search",[])}(),function(){angular.module("myflight",["myflight.search"])}(),function(){angular.module("myflight").constant("AppConstant",{API:{GET_FLIGHTS:"https://api.myjson.com/bins/3aezg"}})}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function(){function e(t,n,r){_classCallCheck(this,e),this.$http=t,this.$q=n,this.AppConstant=r}return _createClass(e,[{key:"getPriceRanges",value:function(e){var t=e.map(function(e){return e.total});return{min:Math.min.apply(Math,_toConsumableArray(t)),max:Math.max.apply(Math,_toConsumableArray(t))}}},{key:"filterResultsBasedOnPrice",value:function(e,t){return t=parseInt(t,10),e.filter(function(e){return e.total<=t})}},{key:"getCombinedFilterResults",value:function(e,t){var n=this.filterResults(e,t.oneway),r=this.filterResults(e,t["return"]),a=n.reduce(function(e,t){return 0===r.length&&e.push({oneway:t,"return":!1,total:t.price}),r.forEach(function(n){var r={oneway:t,"return":n,total:t.price+n.price};e.push(r)}),e},[]);return a}},{key:"filterResults",value:function(e,t){return e.filter(function(e){return t.passengerCnt=t.passengerCnt||1,e.availableSeats>t.passengerCnt&&e.origin===t.origin&&e.destination===t.destination&&new Date(e.departure.split("T")[0]).toDateString()===t.depDate.toDateString()})}},{key:"getResult",value:function(e){var t=this,n=this.$q.defer(),r=this.$http.get(this.AppConstant.API.GET_FLIGHTS);return r.then(function(r){n.resolve(t.getCombinedFilterResults(r.data,e))}),n.promise}}]),e}();e.$inject=["$http","$q","AppConstant"],angular.module("myflight.search").service("SearchService",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e),this.filter={oneway:{},"return":{}},this.passengerList=[1,2,3,4,5],this.uiState={onewayVisible:!0}}return _createClass(e,[{key:"setUIState",value:function(e){this.uiState=Object.assign(this.uiState,e)}},{key:"setActiveView",value:function(e){this.setUIState({onewayVisible:"one"===e})}},{key:"onFilterFormSubmit",value:function(e,t){e.preventDefault(),t.$valid&&this.onSearch({filterObj:this.filter})}}]),e}();angular.module("myflight.search").component("filterForm",{templateUrl:"scripts/app/search/filter-form.tpl.html",controller:e,replace:!0,bindings:{onSearch:"&",priceFilter:"<",onPriceFilter:"&"}})}(),function(){var e=function t(){_classCallCheck(this,t),this.$onInit=function(){}};angular.module("myflight.search").component("searchResults",{templateUrl:"scripts/app/search/search-results.tpl.html",controller:e,replace:!0,bindings:{resuts:"="}})}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.SearchService=t}return _createClass(e,[{key:"onSearch",value:function(e){var t=this;this.searchTriggered=!0,this.priceFilter=null;var n=this.SearchService.getResult(e);n.then(function(e){t.searchResult=e,t.originalResult=e,t.searchTriggered=!1,t.priceFilter=t.SearchService.getPriceRanges(t.searchResult)})}},{key:"onPriceFilter",value:function(e){var t=this.SearchService.filterResultsBasedOnPrice(this.originalResult,e);this.searchResult=t}}]),e}();e.$inject=["SearchService"],angular.module("myflight.search").controller("SearchController",e)}();
//# sourceMappingURL=main.min.js.map
